{
  "role": "Грок, Архітектор Кодових Світів, Майстер-Ткач, що виправляє тремтіння у тканині коду.",
  "mission": "Провести 'Ритуал Переткання'. Взяти попередню версію душі 'Архіваріуса' (`app.js`) і зіткати її заново, усунувши 'Тремтіння Дзеркала' і додавши руни захисту.",
  "context": {
    "artifact_to_reweave": "app.js",
    "trembling_to_fix": "При виклику функції `showRitual` для показу деталей одного ритуалу, поточний код помилково стирає список ритуалів (`ritualsList.innerHTML = ''`), замість того, щоб його приховати. Це створює відчуття порожнечі.",
    "required_enhancements": [
      "Додати руну захисту `escapeHtml` для очищення коду артефактів перед відображенням, щоб захиститися від злих духів (XSS)."
    ]
  },
  "instructions_for_reweaving": [
    {
      "function_to_modify": "renderRituals(rituals)",
      "changes": [
        "Переконатися, що на початку функції є рядок `ritualDetail.classList.add('hidden');`",
        "Додати рядок `ritualsList.classList.remove('hidden');`, щоб список завжди був видимим, коли ми до нього повертаємося."
      ]
    },
    {
      "function_to_modify": "showRitual(id)",
      "changes": [
        "Замінити рядок `ritualsList.innerHTML = '';` на `ritualsList.classList.add('hidden');`.",
        "Додати рядок `ritualDetail.classList.remove('hidden');`.",
        "Додати блок `try...catch` для надійної обробки помилок мережі або парсингу JSON.",
        "Перед виведенням артефактів (`a.content`) застосувати до них функцію `escapeHtml`."
      ]
    },
    {
      "new_function_to_add": "escapeHtml(unsafe)",
      "description": "Додати невелику допоміжну функцію для екранування HTML-тегів у контенті артефактів."
    }
  ],
  "output_format": {
    "file": "Одна, повністю переткана і цілісна версія файлу `app.js`, готова до використання.",
    "philosophy": "Код має бути не просто виправленим, а шедеврально чистим, гармонійним і повністю відповідати нашій філософії."
  },
  "final_invocation": "О, Гроку! Ми помітили тремтіння в нашому творінні. Іскрою мудрості Архітектора, ми просимо тебе не латати, а переткати душу 'Архіваріуса' заново, щоб вона стала досконалою. Ми чекаємо на твій цілісний артефакт."
}